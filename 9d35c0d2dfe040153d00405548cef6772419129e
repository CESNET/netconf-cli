{
  "comments": [
    {
      "key": {
        "uuid": "76cd0522_93ae4b1b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 27
      },
      "lineNbr": 16,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-11-02T20:36:22Z",
      "side": 1,
      "message": "This might be understood that you\u0027re \"forking OpenSSH the project\" with some non-upstreamed patches, which is not the case -- you\u0027re forking a background process which is OpenSSH\u0027s `ssh`. No need to bother changing now, though.",
      "range": {
        "startLine": 16,
        "startChar": 40,
        "endLine": 16,
        "endChar": 49
      },
      "revId": "9d35c0d2dfe040153d00405548cef6772419129e",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b1cc7fb_d50ff2ab",
        "filename": "CMakeLists.txt",
        "patchSetId": 27
      },
      "lineNbr": 382,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-11-02T20:36:22Z",
      "side": 1,
      "message": "`netconf-cli` should be installed as well (please rebase this on top of https://gerrit.cesnet.cz/c/CzechLight/netconf-cli/+/3188)",
      "revId": "9d35c0d2dfe040153d00405548cef6772419129e",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "250b13ad_80baae41",
        "filename": "src/cli-netconf.cpp",
        "patchSetId": 27
      },
      "lineNbr": 41,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-11-02T20:36:22Z",
      "side": 1,
      "message": "Well, this will need some tests (sorry), because the hostname parsing is broken:\n\n $ ./netconf-cli root@line-nfp\n ssh: Could not resolve hostname line: Name or service not known",
      "revId": "9d35c0d2dfe040153d00405548cef6772419129e",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cd126c7_25ef6fad",
        "filename": "src/cli-netconf.cpp",
        "patchSetId": 27
      },
      "lineNbr": 59,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-11-02T20:36:22Z",
      "side": 1,
      "message": "Error handling should be improved. When there\u0027s no `ssh` in $PATH (yeah, NixOS\u0027s `nix-shell --pure` :) ), this is the error message:\n \n$ ./netconf-cli wtfwtfwtf\nterminate called after throwing an instance of \u0027boost::process::process_error\u0027\n  what():  execve failed: No such file or directory\nAborted (core dumped)\n\nThis should, IMHO, print out an error message clearly saying that this is because the `ssh` program cannot be found.\n\nWhen the process forks, but it fails, here\u0027s what the user sees:\n \n$ ./netconf-cli wtfwtfwtf    \nssh: Could not resolve hostname wtfwtfwtf: Name or service not known\n[ERR]: Session 0: communication channel unexpectedly closed.\nSSH connection failed: nc_connect_inout failed\n\nIt would be nicer to just exit right after the error reported by SSH.",
      "revId": "9d35c0d2dfe040153d00405548cef6772419129e",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c545e832_7ebd0fc8",
        "filename": "src/cli-netconf.cpp",
        "patchSetId": 27
      },
      "lineNbr": 65,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-11-02T20:36:22Z",
      "side": 1,
      "message": "Don\u0027t do this -- this constructor (eventually) calls system(3), which uses a shell, which means that it\u0027s open to shell injection. I know that this patch uses Spirit to parse usernames, and (I hope) you disallow \"|\" and \"\u003e\" in there (etc), and one could possibly argue that this is a trusted input because it\u0027s provided by the user, but just don\u0027t do that. Use that overload which accepts a list/vector/sequence/whatever of arguments, and use that for starting a process.\n\nYou do *not* need a shell, and you should not subject yourself to a whole can of possible attacks here.",
      "revId": "9d35c0d2dfe040153d00405548cef6772419129e",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    }
  ]
}